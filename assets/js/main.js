!function(e){var i,t=e(window),l=e("body"),s=e("#wrapper"),a=e("#header"),n=e("#footer"),r=e("#main"),c=r.children("article");(breakpoints({xlarge:["1281px","1680px"],large:["981px","1280px"],medium:["737px","980px"],small:["481px","736px"],xsmall:["361px","480px"],xxsmall:[null,"360px"]}),t.on("load",function(){window.setTimeout(function(){l.removeClass("is-preload")},100)}),"ie"==browser.name)&&t.on("resize.flexbox-fix",function(){clearTimeout(i),i=setTimeout(function(){s.prop("scrollHeight")>t.height()?s.css("height","auto"):s.css("height","100vh")},250)}).triggerHandler("resize.flexbox-fix");var o=a.children("nav"),h=o.find("li");h.length%2==0&&(o.addClass("use-middle"),h.eq(h.length/2).addClass("is-middle"));var d=325,u=!1;if(r._show=function(i,e){var s=c.filter("#"+i);if(0!=s.length){if(u||void 0!==e&&!0===e)return l.addClass("is-switching"),l.addClass("is-article-visible"),c.removeClass("active"),a.hide(),n.hide(),r.show(),s.show(),s.addClass("active"),u=!1,void setTimeout(function(){l.removeClass("is-switching")},e?1e3:0);if(u=!0,l.hasClass("is-article-visible")){var o=c.filter(".active");o.removeClass("active"),setTimeout(function(){o.hide(),s.show(),setTimeout(function(){s.addClass("active"),t.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout(function(){u=!1},d)},25)},d)}else l.addClass("is-article-visible"),setTimeout(function(){a.hide(),n.hide(),r.show(),s.show(),setTimeout(function(){s.addClass("active"),t.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout(function(){u=!1},d)},25)},d)}},r._hide=function(i){var e=c.filter(".active");if(l.hasClass("is-article-visible")){if(void 0!==i&&!0===i&&history.pushState(null,null,"#"),u)return l.addClass("is-switching"),e.removeClass("active"),e.hide(),r.hide(),n.show(),a.show(),l.removeClass("is-article-visible"),u=!1,l.removeClass("is-switching"),void t.scrollTop(0).triggerHandler("resize.flexbox-fix");u=!0,e.removeClass("active"),setTimeout(function(){e.hide(),r.hide(),n.show(),a.show(),setTimeout(function(){l.removeClass("is-article-visible"),t.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout(function(){u=!1},d)},25)},d)}},c.each(function(){var i=e(this);e('<div class="close">Close</div>').appendTo(i).on("click",function(){location.hash=""}),i.on("click",function(i){i.stopPropagation()})}),l.on("click",function(i){l.hasClass("is-article-visible")&&r._hide(!0)}),t.on("keyup",function(i){switch(i.keyCode){case 27:l.hasClass("is-article-visible")&&r._hide(!0)}}),t.on("hashchange",function(i){""==location.hash||"#"==location.hash?(i.preventDefault(),i.stopPropagation(),r._hide()):0<c.filter(location.hash).length&&(i.preventDefault(),i.stopPropagation(),r._show(location.hash.substr(1)))}),"scrollRestoration"in history)history.scrollRestoration="manual";else{var f=0,v=0,p=e("html,body");t.on("scroll",function(){f=v,v=p.scrollTop()}).on("hashchange",function(){t.scrollTop(f)})}r.hide(),c.hide(),""!=location.hash&&"#"!=location.hash&&t.on("load",function(){r._show(location.hash.substr(1),!0)})}(jQuery);
